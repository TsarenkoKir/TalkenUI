"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[409],{7841:function(e,s,n){n.d(s,{Z:function(){return d}});var r=n(5893),t=n(7294),a=n(8934),i=n(7568),c=n(7582),l=function(){var e=(0,t.useContext)(a.p),s=e.messagesList,n=e.selectedUserName,l=e.showMessages,o=e.selectedAddr,d=e.messageInput,u=e.setMessageInput,h=e.sendMessage,x=(0,t.useState)(!1),m=x[0],p=x[1];(0,t.useEffect)((function(){o&&(p(!0),l(o).finally((function(){p(!1)})))}),[o]);!function(){var e=(0,i.Z)((function(){var e;return(0,c.__generator)(this,(function(s){switch(s.label){case 0:if(!d.trim())return alert("Message cannot be empty!"),[2];s.label=1;case 1:return s.trys.push([1,3,4,5]),p(!0),[4,h(o)];case 2:return s.sent(),u(""),[3,5];case 3:return e=s.sent(),console.error("Failed to send message:",e),alert("Failed to send message. Please try again."),[3,5];case 4:return p(!1),[7];case 5:return[2]}}))}))}();return o?(0,r.jsxs)("div",{className:"messages",children:[(0,r.jsx)("div",{className:"message-header",children:(0,r.jsxs)("h3",{children:["Chat with ",n||"Unknown User"]})}),(0,r.jsx)("div",{className:"message-list",children:m?(0,r.jsx)("p",{children:"Loading messages..."}):Array.isArray(s)&&s.length>0?s.map((function(e,s){var n=e.sender,t=e.msg,a=e.timestamp,i=isNaN(Number(a))?"Invalid time":new Date(1e3*Number(a)).toLocaleTimeString();return(0,r.jsxs)("div",{className:"message",children:[(0,r.jsxs)("p",{children:[(0,r.jsxs)("strong",{children:["From: ",n]}),(0,r.jsx)("br",{}),(0,r.jsx)("strong",{children:"Message:"})," ",(0,r.jsx)("span",{children:t})]}),(0,r.jsx)("span",{children:i})]},s)})):(0,r.jsx)("p",{children:"No messages yet. Say hello!"})})]}):(0,r.jsx)("div",{className:"messages",children:(0,r.jsx)("p",{children:"Please select a friend to start a chat."})})},o=function(){var e=(0,t.useContext)(a.p),s=(e.setSearchAccount,e.searchAndAddFriend,e.setMessageInput),n=e.sendMessage,i=e.selectedAddr;return(0,r.jsxs)("div",{className:"input",children:[(0,r.jsx)("input",{required:!0,type:"text",placeholder:"Type something...",onChange:function(e){return s(e.target.value)}}),(0,r.jsx)("div",{className:"send",children:(0,r.jsx)("button",{onClick:function(){i?n(i):alert("No friend selected")},children:"Send"})})]})},d=function(){var e=(0,t.useContext)(a.p).selectedUserName;return(0,r.jsxs)("div",{className:"chat",children:[(0,r.jsx)("div",{className:"chatInfo",children:(0,r.jsx)("span",{children:e})}),(0,r.jsx)(l,{}),(0,r.jsx)(o,{})]})}},6577:function(e,s,n){n.d(s,{Z:function(){return o}});var r=n(5893),t=n(7294),a=n(8934),i=function(){var e=(0,t.useContext)(a.p),s=(e.networkError,e.isUserLoggedIn,e.logoutUser);return(0,r.jsxs)("div",{className:"navbar",children:[(0,r.jsx)("span",{className:"logo",children:"DApp Chat"}),(0,r.jsx)("div",{className:"user",children:(0,r.jsx)("button",{onClick:s,children:"logout"})})]})},c=(n(1163),n(1664),function(){var e=(0,t.useContext)(a.p),s=e.setSearchAccount,n=e.searchAndAddFriend;return(0,r.jsx)("div",{className:"search",children:(0,r.jsx)("div",{className:"searchForm",children:(0,r.jsxs)("form",{onSubmit:n,children:[(0,r.jsx)("input",{required:!0,type:"text",placeholder:"Enter Address to Add Friend",onChange:function(e){return s(e.target.value)}}),(0,r.jsx)("button",{type:"submit",children:"Add"})]})})})}),l=function(){var e=(0,t.useContext)(a.p),s=e.friendsList,n=e.getMyFriendList,i=e.showMessages,c=e.setSelectedUserName,l=e.setSelectedAddr;return(0,t.useEffect)((function(){n()}),[n]),(0,r.jsx)("div",{className:"chats",children:Array.isArray(s)&&s.length>0?s.map((function(e,s){return(0,r.jsxs)("div",{className:"userChat",onClick:function(){i(e.pubkey),l(e.pubkey),c(e.name)},children:[(0,r.jsx)("img",{src:"https://png.pngitem.com/pimgs/s/130-1300253_female-user-icon-png-download-user-image-color.png",alt:"Friend Avatar"}),(0,r.jsx)("div",{className:"userChatInfo",children:(0,r.jsx)("span",{children:e.name})})]},e.pubkey||s)})):(0,r.jsx)("p",{children:"No friends found"})})},o=function(){return(0,r.jsxs)("div",{className:"sidebar",children:[(0,r.jsx)(i,{}),(0,r.jsx)(c,{}),(0,r.jsx)(l,{})]})}},3410:function(e,s,n){n.r(s);var r=n(5893),t=n(7294),a=n(6577),i=n(7841),c=n(8934);s.default=function(){var e=(0,t.useContext)(c.p).connectWallet;return(0,t.useEffect)((function(){e()}),[]),(0,r.jsx)("div",{className:"home",children:(0,r.jsxs)("div",{className:"container",children:[(0,r.jsx)(a.Z,{}),(0,r.jsx)(i.Z,{})]})})}},3396:function(e,s,n){n.r(s);var r=n(5893),t=n(7294),a=(n(1163),n(1664)),i=n.n(a),c=n(8934),l=(n(542),n(8751));s.default=function(){var e=(0,t.useState)(!1),s=e[0],n=(e[1],(0,t.useContext)(c.p)),a=n.networkError,o=n.isUserLoggedIn,d=n.connectWallet,u=n.setUsername,h=n.setPassword,x=n.loginUser;return(0,t.useEffect)((function(){d()}),[]),(0,r.jsx)(r.Fragment,{children:o||a?(0,r.jsx)("div",{className:"formContainer",children:(0,r.jsxs)("div",{className:"formWrapper",children:[(0,r.jsx)("span",{className:"logo",children:"DApp Chat"}),(0,r.jsx)("span",{className:"title",children:"Login"}),(0,r.jsxs)("form",{onSubmit:x,children:[(0,r.jsx)("input",{required:!0,type:"text",placeholder:"Username",onChange:function(e){return u(e.target.value)}}),(0,r.jsx)("input",{required:!0,type:"password",placeholder:"Password",onChange:function(e){return h(e.target.value)}}),(0,r.jsx)("button",{type:"submit",children:"Sign In"}),s&&(0,r.jsx)("span",{children:"Something went wrong"})]}),(0,r.jsxs)("p",{children:["You don't have an account?"," ",(0,r.jsx)(i(),{href:"/Register",children:"Register"})]})]})}):(0,r.jsx)(l.default,{})})}},542:function(e,s,n){n.r(s);var r=n(5893),t=n(7294),a=n(1664),i=n.n(a),c=(n(8751),n(8934));s.default=function(){var e=(0,t.useContext)(c.p),s=(e.networkError,e.isUserLoggedIn,e.connectWallet),n=e.setUsername,a=e.setPassword,l=e.registerUser;return(0,t.useEffect)((function(){s()}),[]),(0,r.jsx)("div",{className:"formContainer",children:(0,r.jsxs)("div",{className:"formWrapper",children:[(0,r.jsx)("span",{className:"logo",children:"DApp Chat"}),(0,r.jsx)("span",{className:"title",children:"Register User"}),(0,r.jsxs)("form",{onSubmit:l,children:[(0,r.jsx)("input",{required:!0,type:"text",placeholder:"Username",onChange:function(e){return n(e.target.value)}}),(0,r.jsx)("input",{required:!0,type:"password",placeholder:"Password",onChange:function(e){return a(e.target.value)}}),(0,r.jsx)("button",{type:"submit",children:"Sign up"})]}),(0,r.jsxs)("p",{children:["You do have an account? ",(0,r.jsx)(i(),{href:"/Login",children:"Login"})," "]})]})})}},8751:function(e,s,n){n.r(s),n.d(s,{default:function(){return o}});var r=n(5893),t=(n(6577),n(7841),n(3410),n(3396)),a=(n(542),n(7294)),i=n(8934),c=function(e){var s=e.connectWallet;return(0,r.jsx)("div",{className:"formContainer",children:(0,r.jsx)("button",{className:"connectButton",onClick:s,children:"Connect Pelagus Wallet"})})},l=function(){return(0,r.jsx)("div",{className:"formContainer",children:(0,r.jsxs)("div",{className:"formWrapper",children:[(0,r.jsx)("div",{children:"----------------------------------------"}),(0,r.jsx)("div",{children:"Please connect to the Golden Age Network - Colloseum"}),(0,r.jsx)("div",{children:"and reload the page"}),(0,r.jsx)("div",{children:"----------------------------------------"})]})})};function o(){var e=(0,a.useContext)(i.p),s=e.correctNetwork,n=e.networkError,o=e.isUserLoggedIn,d=(e.currentAccount,e.connectWallet);return(0,r.jsx)("div",{children:o||n?s&&!n?(0,r.jsx)(t.default,{}):(0,r.jsx)(l,{}):(0,r.jsx)(c,{connectWallet:d})})}}}]);